import{C as fe,D as Ke,r as N,E as w,d as ee,G as X,A as _,H as j,I as ht,J as vt,K as mt,L as he,o as ce,M as re,N as _e,O as gt,P as bt,Q as yt,R as Se,S as He,F as ve,U as Ee,V as me,W as St,X as It,Y as Ot,Z as kt,$ as G,a0 as Ue,a as Ct,a1 as xt,a2 as W,k as $e,a3 as Ie,a4 as ze,a5 as We,a6 as J,b as P,c as K,n as $,t as Z,f as H,e as U,a7 as ge,a8 as V,w as z,a9 as oe,aa as ae,ab as Mt,ac as wt,ad as qe,ae as Rt,af as be,ag as Ge,ah as Pe,ai as de,aj as Ye,ak as Xe,al as At,am as Et,g as ue,an as $t,ao as Pt,ap as Lt,aq as Tt,ar as _t,as as Nt,at as Bt,au as Ft,av as jt,aw as Je,ax as Vt,u as Dt,x as Kt,ay as Ht,az as Ut,aA as zt,aB as Wt,aC as Y,aD as qt}from"./entry.8caf2e62.js";function Gt(e){throw new Error("Unexpected object: "+e)}var F=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(F||{});function Yt(e,t){let n=t.resolveItems();if(n.length<=0)return null;let s=t.resolveActiveIndex(),a=s??-1,o=(()=>{switch(e.focus){case 0:return n.findIndex(i=>!t.resolveDisabled(i));case 1:{let i=n.slice().reverse().findIndex((l,u,c)=>a!==-1&&c.length-u-1>=a?!1:!t.resolveDisabled(l));return i===-1?i:n.length-1-i}case 2:return n.findIndex((i,l)=>l<=a?!1:!t.resolveDisabled(i));case 3:{let i=n.slice().reverse().findIndex(l=>!t.resolveDisabled(l));return i===-1?i:n.length-1-i}case 4:return n.findIndex(i=>t.resolveId(i)===e.id);case 5:return null;default:Gt(e)}})();return o===-1?s:o}function Xt({container:e,accept:t,walk:n,enabled:s}){fe(()=>{let a=e.value;if(!a||s!==void 0&&!s.value)return;let o=Ke(e);if(!o)return;let i=Object.assign(u=>t(u),{acceptNode:t}),l=o.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,i,!1);for(;l.nextNode();)n(l.currentNode)})}function Qe(e={},t=null,n=[]){for(let[s,a]of Object.entries(e))et(n,Ze(t,s),a);return n}function Ze(e,t){return e?e+"["+t+"]":t}function et(e,t,n){if(Array.isArray(n))for(let[s,a]of n.entries())et(e,Ze(t,s.toString()),a);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):Qe(n,t,e)}function Jt(e,t,n){let s=N(n==null?void 0:n.value),a=w(()=>e.value!==void 0);return[w(()=>a.value?e.value:s.value),function(o){return a.value||(s.value=o),t==null?void 0:t(o)}]}function Ne(e){return[e.screenX,e.screenY]}function Qt(){let e=N([-1,-1]);return{wasMoved(t){let n=Ne(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=Ne(t)}}}function Zt(e,t){return e===t}var en=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(en||{}),tn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(tn||{}),nn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(nn||{});let tt=Symbol("ComboboxContext");function Oe(e){let t=It(tt,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Oe),n}return t}let on=ee({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Zt},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:s}){let a=N(1),o=N(null),i=N(null),l=N(null),u=N(null),c=N({static:!1,hold:!1}),r=N([]),d=N(null),h=N(1),S=N(!1);function O(p=f=>f){let f=d.value!==null?r.value[d.value]:null,y=Ot(p(r.value.slice()),R=>j(R.dataRef.domRef)),I=f?y.indexOf(f):null;return I===-1&&(I=null),{options:y,activeOptionIndex:I}}let C=w(()=>e.multiple?1:0),M=w(()=>e.nullable),[m,A]=Jt(w(()=>e.modelValue),p=>s("update:modelValue",p),w(()=>e.defaultValue)),E=w(()=>m.value===void 0?X(C.value,{1:[],0:void 0}):m.value),T=null,L=null,b={comboboxState:a,value:E,mode:C,compare(p,f){if(typeof e.by=="string"){let y=e.by;return(p==null?void 0:p[y])===(f==null?void 0:f[y])}return e.by(p,f)},defaultValue:w(()=>e.defaultValue),nullable:M,inputRef:i,labelRef:o,buttonRef:l,optionsRef:u,disabled:w(()=>e.disabled),options:r,change(p){A(p)},activeOptionIndex:w(()=>{if(S.value&&d.value===null&&r.value.length>0){let p=r.value.findIndex(f=>!f.dataRef.disabled);p!==-1&&(d.value=p)}return d.value}),activationTrigger:h,optionsPropsRef:c,closeCombobox(){S.value=!1,!e.disabled&&a.value!==1&&(a.value=1,d.value=null)},openCombobox(){if(S.value=!0,e.disabled||a.value===0)return;let p=r.value.findIndex(f=>{let y=_(f.dataRef.value);return X(C.value,{0:()=>b.compare(_(b.value.value),_(y)),1:()=>_(b.value.value).some(I=>b.compare(_(I),_(y)))})});p!==-1&&(d.value=p),a.value=0},goToOption(p,f,y){S.value=!1,T!==null&&cancelAnimationFrame(T),T=requestAnimationFrame(()=>{if(e.disabled||u.value&&!c.value.static&&a.value===1)return;let I=O();if(I.activeOptionIndex===null){let x=I.options.findIndex(B=>!B.dataRef.disabled);x!==-1&&(I.activeOptionIndex=x)}let R=Yt(p===F.Specific?{focus:F.Specific,id:f}:{focus:p},{resolveItems:()=>I.options,resolveActiveIndex:()=>I.activeOptionIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.disabled});d.value=R,h.value=y??1,r.value=I.options})},selectOption(p){let f=r.value.find(I=>I.id===p);if(!f)return;let{dataRef:y}=f;A(X(C.value,{0:()=>y.value,1:()=>{let I=_(b.value.value).slice(),R=_(y.value),x=I.findIndex(B=>b.compare(R,_(B)));return x===-1?I.push(R):I.splice(x,1),I}}))},selectActiveOption(){if(b.activeOptionIndex.value===null)return;let{dataRef:p,id:f}=r.value[b.activeOptionIndex.value];A(X(C.value,{0:()=>p.value,1:()=>{let y=_(b.value.value).slice(),I=_(p.value),R=y.findIndex(x=>b.compare(I,_(x)));return R===-1?y.push(I):y.splice(R,1),y}})),b.goToOption(F.Specific,f)},registerOption(p,f){L&&cancelAnimationFrame(L);let y={id:p,dataRef:f},I=O(R=>(R.push(y),R));if(d.value===null){let R=f.value.value;X(C.value,{0:()=>b.compare(_(b.value.value),_(R)),1:()=>_(b.value.value).some(x=>b.compare(_(x),_(R)))})&&(I.activeOptionIndex=I.options.indexOf(y))}r.value=I.options,d.value=I.activeOptionIndex,h.value=1,I.options.some(R=>!j(R.dataRef.domRef))&&(L=requestAnimationFrame(()=>{let R=O();r.value=R.options,d.value=R.activeOptionIndex}))},unregisterOption(p){var f;b.activeOptionIndex.value!==null&&((f=b.options.value[b.activeOptionIndex.value])==null?void 0:f.id)===p&&(S.value=!0);let y=O(I=>{let R=I.findIndex(x=>x.id===p);return R!==-1&&I.splice(R,1),I});r.value=y.options,d.value=y.activeOptionIndex,h.value=1}};ht([i,l,u],()=>b.closeCombobox(),w(()=>a.value===0)),vt(tt,b),mt(w(()=>X(a.value,{0:he.Open,1:he.Closed})));let v=w(()=>b.activeOptionIndex.value===null?null:r.value[b.activeOptionIndex.value].dataRef.value),g=w(()=>{var p;return(p=j(i))==null?void 0:p.closest("form")});return ce(()=>{re([g],()=>{if(!g.value||e.defaultValue===void 0)return;function p(){b.change(e.defaultValue)}return g.value.addEventListener("reset",p),()=>{var f;(f=g.value)==null||f.removeEventListener("reset",p)}},{immediate:!0})}),()=>{let{name:p,disabled:f,form:y,...I}=e,R={open:a.value===0,disabled:f,activeIndex:b.activeOptionIndex.value,activeOption:v.value,value:E.value};return _e(ve,[...p!=null&&E.value!=null?Qe({[p]:E.value}).map(([x,B])=>_e(gt,bt({features:yt.Hidden,key:x,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:y,name:x,value:B}))):[],Se({theirProps:{...n,...He(I,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:R,slots:t,attrs:n,name:"Combobox"})])}}}),an=ee({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${Ee()}`}},emits:{change:e=>!0},setup(e,{emit:t,attrs:n,slots:s,expose:a}){let o=Oe("ComboboxInput"),i=w(()=>Ke(j(o.inputRef))),l={value:!1};a({el:o.inputRef,$el:o.inputRef});function u(){o.change(null);let m=j(o.optionsRef);m&&(m.scrollTop=0),o.goToOption(F.Nothing)}let c=w(()=>{var m;let A=o.value.value;return j(o.inputRef)?typeof e.displayValue<"u"&&A!==void 0?(m=e.displayValue(A))!=null?m:"":typeof A=="string"?A:"":""});ce(()=>{re([c,o.comboboxState,i],([m,A],[E,T])=>{if(l.value)return;let L=j(o.inputRef);L&&((T===0&&A===1||m!==E)&&(L.value=m),requestAnimationFrame(()=>{var b;if(l.value||!L||((b=i.value)==null?void 0:b.activeElement)!==L)return;let{selectionStart:v,selectionEnd:g}=L;Math.abs((g??0)-(v??0))===0&&v===0&&L.setSelectionRange(L.value.length,L.value.length)}))},{immediate:!0}),re([o.comboboxState],([m],[A])=>{if(m===0&&A===1){if(l.value)return;let E=j(o.inputRef);if(!E)return;let T=E.value,{selectionStart:L,selectionEnd:b,selectionDirection:v}=E;E.value="",E.value=T,v!==null?E.setSelectionRange(L,b,v):E.setSelectionRange(L,b)}})});let r=N(!1);function d(){r.value=!0}function h(){kt().nextFrame(()=>{r.value=!1})}function S(m){switch(l.value=!0,m.key){case G.Enter:if(l.value=!1,o.comboboxState.value!==0||r.value)return;if(m.preventDefault(),m.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case G.ArrowDown:return l.value=!1,m.preventDefault(),m.stopPropagation(),X(o.comboboxState.value,{0:()=>o.goToOption(F.Next),1:()=>o.openCombobox()});case G.ArrowUp:return l.value=!1,m.preventDefault(),m.stopPropagation(),X(o.comboboxState.value,{0:()=>o.goToOption(F.Previous),1:()=>{o.openCombobox(),Ue(()=>{o.value.value||o.goToOption(F.Last)})}});case G.Home:if(m.shiftKey)break;return l.value=!1,m.preventDefault(),m.stopPropagation(),o.goToOption(F.First);case G.PageUp:return l.value=!1,m.preventDefault(),m.stopPropagation(),o.goToOption(F.First);case G.End:if(m.shiftKey)break;return l.value=!1,m.preventDefault(),m.stopPropagation(),o.goToOption(F.Last);case G.PageDown:return l.value=!1,m.preventDefault(),m.stopPropagation(),o.goToOption(F.Last);case G.Escape:if(l.value=!1,o.comboboxState.value!==0)return;m.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&m.stopPropagation(),o.nullable.value&&o.mode.value===0&&o.value.value===null&&u(),o.closeCombobox();break;case G.Tab:if(l.value=!1,o.comboboxState.value!==0)return;o.mode.value===0&&o.selectActiveOption(),o.closeCombobox();break}}function O(m){t("change",m),o.nullable.value&&o.mode.value===0&&m.target.value===""&&u(),o.openCombobox()}function C(){l.value=!1}let M=w(()=>{var m,A,E,T;return(T=(E=(A=e.defaultValue)!=null?A:o.defaultValue.value!==void 0?(m=e.displayValue)==null?void 0:m.call(e,o.defaultValue.value):null)!=null?E:o.defaultValue.value)!=null?T:""});return()=>{var m,A,E,T,L,b;let v={open:o.comboboxState.value===0},{id:g,displayValue:p,onChange:f,...y}=e,I={"aria-controls":(m=o.optionsRef.value)==null?void 0:m.id,"aria-expanded":o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null||(A=o.options.value[o.activeOptionIndex.value])==null?void 0:A.id,"aria-labelledby":(L=(E=j(o.labelRef))==null?void 0:E.id)!=null?L:(T=j(o.buttonRef))==null?void 0:T.id,"aria-autocomplete":"list",id:g,onCompositionstart:d,onCompositionend:h,onKeydown:S,onInput:O,onBlur:C,role:"combobox",type:(b=n.type)!=null?b:"text",tabIndex:0,ref:o.inputRef,defaultValue:M.value,disabled:o.disabled.value===!0?!0:void 0};return Se({ourProps:I,theirProps:y,slot:v,attrs:n,slots:s,features:me.RenderStrategy|me.Static,name:"ComboboxInput"})}}}),sn=ee({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:t,slots:n,expose:s}){let a=Oe("ComboboxOptions"),o=`headlessui-combobox-options-${Ee()}`;s({el:a.optionsRef,$el:a.optionsRef}),fe(()=>{a.optionsPropsRef.value.static=e.static}),fe(()=>{a.optionsPropsRef.value.hold=e.hold});let i=St(),l=w(()=>i!==null?(i.value&he.Open)===he.Open:a.comboboxState.value===0);return Xt({container:w(()=>j(a.optionsRef)),enabled:w(()=>a.comboboxState.value===0),accept(u){return u.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}}),()=>{var u,c,r;let d={open:a.comboboxState.value===0},h={"aria-labelledby":(r=(u=j(a.labelRef))==null?void 0:u.id)!=null?r:(c=j(a.buttonRef))==null?void 0:c.id,id:o,ref:a.optionsRef,role:"listbox","aria-multiselectable":a.mode.value===1?!0:void 0},S=He(e,["hold"]);return Se({ourProps:h,theirProps:S,slot:d,attrs:t,slots:n,features:me.RenderStrategy|me.Static,visible:l.value,name:"ComboboxOptions"})}}}),rn=ee({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:s}){let a=Oe("ComboboxOption"),o=`headlessui-combobox-option-${Ee()}`,i=N(null);s({el:i,$el:i});let l=w(()=>a.activeOptionIndex.value!==null?a.options.value[a.activeOptionIndex.value].id===o:!1),u=w(()=>X(a.mode.value,{0:()=>a.compare(_(a.value.value),_(e.value)),1:()=>_(a.value.value).some(M=>a.compare(_(M),_(e.value)))})),c=w(()=>({disabled:e.disabled,value:e.value,domRef:i}));ce(()=>a.registerOption(o,c)),Ct(()=>a.unregisterOption(o)),fe(()=>{a.comboboxState.value===0&&l.value&&a.activationTrigger.value!==0&&Ue(()=>{var M,m;return(m=(M=j(i))==null?void 0:M.scrollIntoView)==null?void 0:m.call(M,{block:"nearest"})})});function r(M){if(e.disabled)return M.preventDefault();a.selectOption(o),a.mode.value===0&&a.closeCombobox(),xt()||requestAnimationFrame(()=>{var m;return(m=j(a.inputRef))==null?void 0:m.focus()})}function d(){if(e.disabled)return a.goToOption(F.Nothing);a.goToOption(F.Specific,o)}let h=Qt();function S(M){h.update(M)}function O(M){h.wasMoved(M)&&(e.disabled||l.value||a.goToOption(F.Specific,o,0))}function C(M){h.wasMoved(M)&&(e.disabled||l.value&&(a.optionsPropsRef.value.hold||a.goToOption(F.Nothing)))}return()=>{let{disabled:M}=e,m={active:l.value,selected:u.value,disabled:M},A={id:o,ref:i,role:"option",tabIndex:M===!0?void 0:-1,"aria-disabled":M===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onClick:r,onFocus:d,onPointerenter:S,onMouseenter:S,onPointermove:O,onMousemove:O,onPointerleave:C,onMouseleave:C};return Se({ourProps:A,theirProps:e,slot:m,attrs:n,slots:t,name:"ComboboxOption"})}}});function Q(e){return Array.isArray?Array.isArray(e):at(e)==="[object Array]"}const ln=1/0;function un(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-ln?"-0":t}function cn(e){return e==null?"":un(e)}function q(e){return typeof e=="string"}function nt(e){return typeof e=="number"}function dn(e){return e===!0||e===!1||pn(e)&&at(e)=="[object Boolean]"}function ot(e){return typeof e=="object"}function pn(e){return ot(e)&&e!==null}function D(e){return e!=null}function ke(e){return!e.trim().length}function at(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const fn="Incorrect 'index' type",hn=e=>`Invalid value for key ${e}`,vn=e=>`Pattern length exceeds max of ${e}.`,mn=e=>`Missing ${e} property in key`,gn=e=>`Property 'weight' in key '${e}' must be a positive integer`,Be=Object.prototype.hasOwnProperty;class bn{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(s=>{let a=st(s);n+=a.weight,this._keys.push(a),this._keyMap[a.id]=a,n+=a.weight}),this._keys.forEach(s=>{s.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function st(e){let t=null,n=null,s=null,a=1,o=null;if(q(e)||Q(e))s=e,t=Fe(e),n=Ce(e);else{if(!Be.call(e,"name"))throw new Error(mn("name"));const i=e.name;if(s=i,Be.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(gn(i));t=Fe(i),n=Ce(i),o=e.getFn}return{path:t,id:n,weight:a,src:s,getFn:o}}function Fe(e){return Q(e)?e:e.split(".")}function Ce(e){return Q(e)?e.join("."):e}function yn(e,t){let n=[],s=!1;const a=(o,i,l)=>{if(D(o))if(!i[l])n.push(o);else{let u=i[l];const c=o[u];if(!D(c))return;if(l===i.length-1&&(q(c)||nt(c)||dn(c)))n.push(cn(c));else if(Q(c)){s=!0;for(let r=0,d=c.length;r<d;r+=1)a(c[r],i,l+1)}else i.length&&a(c,i,l+1)}};return a(e,q(t)?t.split("."):t,0),s?n:n[0]}const Sn={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},In={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},On={location:0,threshold:.6,distance:100},kn={useExtendedSearch:!1,getFn:yn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var k={...In,...Sn,...On,...kn};const Cn=/[^ ]+/g;function xn(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(a){const o=a.match(Cn).length;if(n.has(o))return n.get(o);const i=1/Math.pow(o,.5*e),l=parseFloat(Math.round(i*s)/s);return n.set(o,l),l},clear(){n.clear()}}}class Le{constructor({getFn:t=k.getFn,fieldNormWeight:n=k.fieldNormWeight}={}){this.norm=xn(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,q(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();q(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!D(t)||ke(t))return;let s={v:t,i:n,n:this.norm.get(t)};this.records.push(s)}_addObject(t,n){let s={i:n,$:{}};this.keys.forEach((a,o)=>{let i=a.getFn?a.getFn(t):this.getFn(t,a.path);if(D(i)){if(Q(i)){let l=[];const u=[{nestedArrIndex:-1,value:i}];for(;u.length;){const{nestedArrIndex:c,value:r}=u.pop();if(D(r))if(q(r)&&!ke(r)){let d={v:r,i:c,n:this.norm.get(r)};l.push(d)}else Q(r)&&r.forEach((d,h)=>{u.push({nestedArrIndex:h,value:d})})}s.$[o]=l}else if(q(i)&&!ke(i)){let l={v:i,n:this.norm.get(i)};s.$[o]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function it(e,t,{getFn:n=k.getFn,fieldNormWeight:s=k.fieldNormWeight}={}){const a=new Le({getFn:n,fieldNormWeight:s});return a.setKeys(e.map(st)),a.setSources(t),a.create(),a}function Mn(e,{getFn:t=k.getFn,fieldNormWeight:n=k.fieldNormWeight}={}){const{keys:s,records:a}=e,o=new Le({getFn:t,fieldNormWeight:n});return o.setKeys(s),o.setIndexRecords(a),o}function pe(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:a=k.distance,ignoreLocation:o=k.ignoreLocation}={}){const i=t/e.length;if(o)return i;const l=Math.abs(s-n);return a?i+l/a:l?1:i}function wn(e=[],t=k.minMatchCharLength){let n=[],s=-1,a=-1,o=0;for(let i=e.length;o<i;o+=1){let l=e[o];l&&s===-1?s=o:!l&&s!==-1&&(a=o-1,a-s+1>=t&&n.push([s,a]),s=-1)}return e[o-1]&&o-s>=t&&n.push([s,o-1]),n}const ne=32;function Rn(e,t,n,{location:s=k.location,distance:a=k.distance,threshold:o=k.threshold,findAllMatches:i=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,includeMatches:u=k.includeMatches,ignoreLocation:c=k.ignoreLocation}={}){if(t.length>ne)throw new Error(vn(ne));const r=t.length,d=e.length,h=Math.max(0,Math.min(s,d));let S=o,O=h;const C=l>1||u,M=C?Array(d):[];let m;for(;(m=e.indexOf(t,O))>-1;){let v=pe(t,{currentLocation:m,expectedLocation:h,distance:a,ignoreLocation:c});if(S=Math.min(v,S),O=m+r,C){let g=0;for(;g<r;)M[m+g]=1,g+=1}}O=-1;let A=[],E=1,T=r+d;const L=1<<r-1;for(let v=0;v<r;v+=1){let g=0,p=T;for(;g<p;)pe(t,{errors:v,currentLocation:h+p,expectedLocation:h,distance:a,ignoreLocation:c})<=S?g=p:T=p,p=Math.floor((T-g)/2+g);T=p;let f=Math.max(1,h-p+1),y=i?d:Math.min(h+p,d)+r,I=Array(y+2);I[y+1]=(1<<v)-1;for(let x=y;x>=f;x-=1){let B=x-1,se=n[e.charAt(B)];if(C&&(M[B]=+!!se),I[x]=(I[x+1]<<1|1)&se,v&&(I[x]|=(A[x+1]|A[x])<<1|1|A[x+1]),I[x]&L&&(E=pe(t,{errors:v,currentLocation:B,expectedLocation:h,distance:a,ignoreLocation:c}),E<=S)){if(S=E,O=B,O<=h)break;f=Math.max(1,2*h-O)}}if(pe(t,{errors:v+1,currentLocation:h,expectedLocation:h,distance:a,ignoreLocation:c})>S)break;A=I}const b={isMatch:O>=0,score:Math.max(.001,E)};if(C){const v=wn(M,l);v.length?u&&(b.indices=v):b.isMatch=!1}return b}function An(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<s-n-1}return t}class rt{constructor(t,{location:n=k.location,threshold:s=k.threshold,distance:a=k.distance,includeMatches:o=k.includeMatches,findAllMatches:i=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,isCaseSensitive:u=k.isCaseSensitive,ignoreLocation:c=k.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:a,includeMatches:o,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const r=(h,S)=>{this.chunks.push({pattern:h,alphabet:An(h),startIndex:S})},d=this.pattern.length;if(d>ne){let h=0;const S=d%ne,O=d-S;for(;h<O;)r(this.pattern.substr(h,ne),h),h+=ne;if(S){const C=d-ne;r(this.pattern.substr(C),C)}}else r(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:s}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let O={isMatch:!0,score:0};return s&&(O.indices=[[0,t.length-1]]),O}const{location:a,distance:o,threshold:i,findAllMatches:l,minMatchCharLength:u,ignoreLocation:c}=this.options;let r=[],d=0,h=!1;this.chunks.forEach(({pattern:O,alphabet:C,startIndex:M})=>{const{isMatch:m,score:A,indices:E}=Rn(t,O,C,{location:a+M,distance:o,threshold:i,findAllMatches:l,minMatchCharLength:u,includeMatches:s,ignoreLocation:c});m&&(h=!0),d+=A,m&&E&&(r=[...r,...E])});let S={isMatch:h,score:h?d/this.chunks.length:1};return h&&s&&(S.indices=r),S}}class te{constructor(t){this.pattern=t}static isMultiMatch(t){return je(t,this.multiRegex)}static isSingleMatch(t){return je(t,this.singleRegex)}search(){}}function je(e,t){const n=e.match(t);return n?n[1]:null}class En extends te{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class $n extends te{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class Pn extends te{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Ln extends te{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Tn extends te{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class _n extends te{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class lt extends te{constructor(t,{location:n=k.location,threshold:s=k.threshold,distance:a=k.distance,includeMatches:o=k.includeMatches,findAllMatches:i=k.findAllMatches,minMatchCharLength:l=k.minMatchCharLength,isCaseSensitive:u=k.isCaseSensitive,ignoreLocation:c=k.ignoreLocation}={}){super(t),this._bitapSearch=new rt(t,{location:n,threshold:s,distance:a,includeMatches:o,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class ut extends te{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,s;const a=[],o=this.pattern.length;for(;(s=t.indexOf(this.pattern,n))>-1;)n=s+o,a.push([s,n-1]);const i=!!a.length;return{isMatch:i,score:i?0:1,indices:a}}}const xe=[En,ut,Pn,Ln,_n,Tn,$n,lt],Ve=xe.length,Nn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Bn="|";function Fn(e,t={}){return e.split(Bn).map(n=>{let s=n.trim().split(Nn).filter(o=>o&&!!o.trim()),a=[];for(let o=0,i=s.length;o<i;o+=1){const l=s[o];let u=!1,c=-1;for(;!u&&++c<Ve;){const r=xe[c];let d=r.isMultiMatch(l);d&&(a.push(new r(d,t)),u=!0)}if(!u)for(c=-1;++c<Ve;){const r=xe[c];let d=r.isSingleMatch(l);if(d){a.push(new r(d,t));break}}}return a})}const jn=new Set([lt.type,ut.type]);class Vn{constructor(t,{isCaseSensitive:n=k.isCaseSensitive,includeMatches:s=k.includeMatches,minMatchCharLength:a=k.minMatchCharLength,ignoreLocation:o=k.ignoreLocation,findAllMatches:i=k.findAllMatches,location:l=k.location,threshold:u=k.threshold,distance:c=k.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:s,minMatchCharLength:a,findAllMatches:i,ignoreLocation:o,location:l,threshold:u,distance:c},this.pattern=n?t:t.toLowerCase(),this.query=Fn(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:a}=this.options;t=a?t:t.toLowerCase();let o=0,i=[],l=0;for(let u=0,c=n.length;u<c;u+=1){const r=n[u];i.length=0,o=0;for(let d=0,h=r.length;d<h;d+=1){const S=r[d],{isMatch:O,indices:C,score:M}=S.search(t);if(O){if(o+=1,l+=M,s){const m=S.constructor.type;jn.has(m)?i=[...i,...C]:i.push(C)}}else{l=0,o=0,i.length=0;break}}if(o){let d={isMatch:!0,score:l/o};return s&&(d.indices=i),d}}return{isMatch:!1,score:1}}}const Me=[];function Dn(...e){Me.push(...e)}function we(e,t){for(let n=0,s=Me.length;n<s;n+=1){let a=Me[n];if(a.condition(e,t))return new a(e,t)}return new rt(e,t)}const ye={AND:"$and",OR:"$or"},Re={PATH:"$path",PATTERN:"$val"},Ae=e=>!!(e[ye.AND]||e[ye.OR]),Kn=e=>!!e[Re.PATH],Hn=e=>!Q(e)&&ot(e)&&!Ae(e),De=e=>({[ye.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function ct(e,t,{auto:n=!0}={}){const s=a=>{let o=Object.keys(a);const i=Kn(a);if(!i&&o.length>1&&!Ae(a))return s(De(a));if(Hn(a)){const u=i?a[Re.PATH]:o[0],c=i?a[Re.PATTERN]:a[u];if(!q(c))throw new Error(hn(u));const r={keyId:Ce(u),pattern:c};return n&&(r.searcher=we(c,t)),r}let l={children:[],operator:o[0]};return o.forEach(u=>{const c=a[u];Q(c)&&c.forEach(r=>{l.children.push(s(r))})}),l};return Ae(e)||(e=De(e)),s(e)}function Un(e,{ignoreFieldNorm:t=k.ignoreFieldNorm}){e.forEach(n=>{let s=1;n.matches.forEach(({key:a,norm:o,score:i})=>{const l=a?a.weight:null;s*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(t?1:o))}),n.score=s})}function zn(e,t){const n=e.matches;t.matches=[],D(n)&&n.forEach(s=>{if(!D(s.indices)||!s.indices.length)return;const{indices:a,value:o}=s;let i={indices:a,value:o};s.key&&(i.key=s.key.src),s.idx>-1&&(i.refIndex=s.idx),t.matches.push(i)})}function Wn(e,t){t.score=e.score}function qn(e,t,{includeMatches:n=k.includeMatches,includeScore:s=k.includeScore}={}){const a=[];return n&&a.push(zn),s&&a.push(Wn),e.map(o=>{const{idx:i}=o,l={item:t[i],refIndex:i};return a.length&&a.forEach(u=>{u(o,l)}),l})}class le{constructor(t,n={},s){this.options={...k,...n},this.options.useExtendedSearch,this._keyStore=new bn(this.options.keys),this.setCollection(t,s)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Le))throw new Error(fn);this._myIndex=n||it(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){D(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let s=0,a=this._docs.length;s<a;s+=1){const o=this._docs[s];t(o,s)&&(this.removeAt(s),s-=1,a-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:s,includeScore:a,shouldSort:o,sortFn:i,ignoreFieldNorm:l}=this.options;let u=q(t)?q(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Un(u,{ignoreFieldNorm:l}),o&&u.sort(i),nt(n)&&n>-1&&(u=u.slice(0,n)),qn(u,this._docs,{includeMatches:s,includeScore:a})}_searchStringList(t){const n=we(t,this.options),{records:s}=this._myIndex,a=[];return s.forEach(({v:o,i,n:l})=>{if(!D(o))return;const{isMatch:u,score:c,indices:r}=n.searchIn(o);u&&a.push({item:o,idx:i,matches:[{score:c,value:o,norm:l,indices:r}]})}),a}_searchLogical(t){const n=ct(t,this.options),s=(l,u,c)=>{if(!l.children){const{keyId:d,searcher:h}=l,S=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(u,d),searcher:h});return S&&S.length?[{idx:c,item:u,matches:S}]:[]}const r=[];for(let d=0,h=l.children.length;d<h;d+=1){const S=l.children[d],O=s(S,u,c);if(O.length)r.push(...O);else if(l.operator===ye.AND)return[]}return r},a=this._myIndex.records,o={},i=[];return a.forEach(({$:l,i:u})=>{if(D(l)){let c=s(n,l,u);c.length&&(o[u]||(o[u]={idx:u,item:l,matches:[]},i.push(o[u])),c.forEach(({matches:r})=>{o[u].matches.push(...r)}))}}),i}_searchObjectList(t){const n=we(t,this.options),{keys:s,records:a}=this._myIndex,o=[];return a.forEach(({$:i,i:l})=>{if(!D(i))return;let u=[];s.forEach((c,r)=>{u.push(...this._findMatches({key:c,value:i[r],searcher:n}))}),u.length&&o.push({idx:l,item:i,matches:u})}),o}_findMatches({key:t,value:n,searcher:s}){if(!D(n))return[];let a=[];if(Q(n))n.forEach(({v:o,i,n:l})=>{if(!D(o))return;const{isMatch:u,score:c,indices:r}=s.searchIn(o);u&&a.push({score:c,key:t,value:o,idx:i,norm:l,indices:r})});else{const{v:o,n:i}=n,{isMatch:l,score:u,indices:c}=s.searchIn(o);l&&a.push({score:u,key:t,value:o,norm:i,indices:c})}return a}}le.version="6.6.2";le.createIndex=it;le.parseIndex=Mn;le.config=k;le.parseQuery=ct;Dn(Vn);function Gn(e,t,n){const s=()=>{var i,l;return new le((i=W(t))!=null?i:[],(l=W(n))==null?void 0:l.fuseOptions)},a=N(s());re(()=>{var i;return(i=W(n))==null?void 0:i.fuseOptions},()=>{a.value=s()},{deep:!0}),re(()=>W(t),i=>{a.value.setCollection(i)},{deep:!0});const o=w(()=>{const i=W(n);if(i!=null&&i.matchAllWhenSearchEmpty&&!W(e))return W(t).map((u,c)=>({item:u,refIndex:c}));const l=i==null?void 0:i.resultLimit;return a.value.search(W(e),l?{limit:l}:void 0)});return{fuse:a,results:o}}const Yn=ee({components:{HComboboxOption:rn,UIcon:Ie,UAvatar:ze,UKbd:We},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const t=w(()=>{const s=e.group[e.groupAttribute];return typeof s=="function"?s(e.query):s});function n(s,{indices:a,value:o}){if(s===o)return"";let i="",l=0;a.forEach(c=>{const r=c[1]+1,d=r-c[0]>=e.query.length;i+=[o.substring(l,c[0]),d&&"<mark>",o.substring(c[0],r),d&&"</mark>"].filter(Boolean).join(""),l=r}),i+=o.substring(l);const u=i.indexOf("<mark>");return u>60&&(i=`...${i.substring(u-60)}`),i}return{label:t,highlight:n}}}),Xn=["aria-label"],Jn=["innerHTML"];function Qn(e,t,n,s,a,o){const i=Ie,l=ze,u=We,c=J("HComboboxOption");return P(),K("div",{class:$(e.ui.group.wrapper),role:"option"},[e.label?(P(),K("h2",{key:0,class:$(e.ui.group.label)},Z(e.label),3)):H("",!0),U("div",{class:$(e.ui.group.container),role:"listbox","aria-label":e.group[e.groupAttribute]},[(P(!0),K(ve,null,ge(e.group.commands,(r,d)=>(P(),V(c,{key:`${e.group.key}-${d}`,value:r,disabled:r.disabled,as:"template"},{default:z(({active:h,selected:S})=>[U("div",{class:$([e.ui.group.command.base,h?e.ui.group.command.active:e.ui.group.command.inactive,r.disabled?"cursor-not-allowed":"cursor-pointer"])},[U("div",{class:$(e.ui.group.command.container)},[oe(e.$slots,`${e.group.key}-icon`,{group:e.group,command:r,active:h,selected:S},()=>[r.icon?(P(),V(i,{key:0,name:r.icon,class:$([e.ui.group.command.icon.base,h?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,r.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):r.avatar?(P(),V(l,ae({key:1},{size:e.ui.group.command.avatar.size,...r.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):r.chip?(P(),K("span",{key:2,class:$(e.ui.group.command.chip.base),style:Mt({background:`#${r.chip}`})},null,6)):H("",!0)]),U("div",{class:$([e.ui.group.command.label,r.disabled&&e.ui.group.command.disabled])},[oe(e.$slots,`${e.group.key}-command`,{group:e.group,command:r,active:h,selected:S},()=>{var O,C;return[r.prefix?(P(),K("span",{key:0,class:$(["flex-shrink-0",r.prefixClass||e.ui.group.command.prefix])},Z(r.prefix),3)):H("",!0),U("span",{class:$(["truncate",{"flex-none":r.suffix||((O=r.matches)==null?void 0:O.length)}])},Z(r[e.commandAttribute]),3),(C=r.matches)!=null&&C.length?(P(),K("span",{key:1,class:$(["truncate",r.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(r[e.commandAttribute],r.matches[0])},null,10,Jn)):r.suffix?(P(),K("span",{key:2,class:$(["truncate",r.suffixClass||e.ui.group.command.suffix])},Z(r.suffix),3)):H("",!0)]})],2)],2),S?(P(),V(i,{key:0,name:e.selectedIcon,class:$(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):h&&(e.group.active||e.$slots[`${e.group.key}-active`])?oe(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:r,active:h,selected:S},()=>[e.group.active?(P(),K("span",{key:0,class:$(e.ui.group.active)},Z(e.group.active),3)):H("",!0)]):oe(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:r,active:h,selected:S},()=>{var O;return[(O=r.shortcuts)!=null&&O.length?(P(),K("span",{key:0,class:$(e.ui.group.command.shortcuts)},[(P(!0),K(ve,null,ge(r.shortcuts,C=>(P(),V(u,{key:C},{default:z(()=>[wt(Z(C),1)]),_:2},1024))),128))],2)):!r.disabled&&e.group.inactive?(P(),K("span",{key:1,class:$(e.ui.group.inactive)},Z(e.group.inactive),3)):H("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,Xn)],2)}const Zn=$e(Yn,[["render",Qn]]),ie=qe(be.ui.strategy,be.ui.commandPalette,Rt),eo=ee({components:{HCombobox:on,HComboboxInput:an,HComboboxOptions:sn,UIcon:Ie,UButton:Ge,CommandPaletteGroup:Zn},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>ie.default.icon},loadingIcon:{type:String,default:()=>ie.default.loadingIcon},selectedIcon:{type:String,default:()=>ie.default.selectedIcon},closeButton:{type:Object,default:()=>ie.default.closeButton},emptyState:{type:Object,default:()=>ie.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:modelValue","close"],setup(e,{emit:t,expose:n}){const{ui:s,attrs:a}=Pe("commandPalette",de(e,"ui"),ie,de(e,"class")),o=N(""),i=N(),l=N(null),u=N(!1);ce(()=>{e.autoselect&&E()}),ce(()=>{setTimeout(()=>{var g;const b=(g=i.value)==null?void 0:g.$.provides;if(!b)return;const v=Object.getOwnPropertySymbols(b);l.value=v.length&&b[v[0]]},200)});const c=w(()=>Ye({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),r=w(()=>{const b=[];for(const v of e.groups)v.search||b.push(...v.commands.map(g=>({...g,group:v.key})));return b}),d=N({}),{results:h}=Gn(o,r,c),S=w(()=>{var g,p;const b=[],v={};for(const f of h.value)v[g=f.item.group]||(v[g]=[]),v[f.item.group].push(f);for(const f in v){const y=e.groups.find(R=>R.key===f);let I=v[f].map(R=>{const{item:x,...B}=R;return{...x,...B}});y.filter&&typeof y.filter=="function"&&(I=y.filter(o.value,I)),b.push({...y,commands:I.slice(0,c.value.resultLimit)})}for(const f of e.groups)if(f.search&&((p=d.value[f.key])!=null&&p.length)){let y=d.value[f.key]||[];f.filter&&typeof f.filter=="function"&&(y=f.filter(o.value,y)),b.push({...f,commands:y.slice(0,c.value.resultLimit)})}return b}),O=Xe(async()=>{const b=e.groups.filter(v=>!!v.search);b.length&&(u.value=!0,await Promise.all(b.map(async v=>{d.value[v.key]=await v.search(o.value)})),u.value=!1,A())},e.debounce);re(o,()=>{O(),A()});const C=w(()=>(e.loading||u.value)&&e.loadingIcon?e.loadingIcon:e.icon),M=w(()=>At(s.value.input.icon.base,s.value.input.icon.size,(e.loading||u.value)&&e.loadingIcon&&"animate-spin")),m=w(()=>({...s.value.default.emptyState,...e.emptyState}));function A(){setTimeout(()=>{var b;(b=i.value)==null||b.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function E(){setTimeout(()=>{var b;(b=i.value)==null||b.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function T(b){t("update:modelValue",b,{query:o.value}),e.autoclear&&setTimeout(()=>{o.value=""},0)}function L(){o.value?o.value="":t("close")}return n({query:o,updateQuery:b=>{o.value=b},comboboxApi:l,results:h}),{ui:s,attrs:a,groups:S,comboboxInput:i,query:o,iconName:C,iconClass:M,emptyState:m,onSelect:T,onClear:L}}});function to(e,t,n,s,a,o){const i=Ie,l=J("HComboboxInput"),u=Ge,c=J("CommandPaletteGroup"),r=J("HComboboxOptions"),d=J("HCombobox");return P(),V(d,ae({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:z(()=>[Et(U("div",{class:$(e.ui.input.wrapper)},[e.iconName?(P(),V(i,{key:0,name:e.iconName,class:$(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):H("",!0),ue(l,{ref:"comboboxInput",value:e.query,class:$([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:t[0]||(t[0]=h=>e.query=h.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(P(),V(u,ae({key:1,"aria-label":"Close"},{...e.ui.default.closeButton,...e.closeButton},{class:e.ui.input.closeButton,onClick:e.onClear}),null,16,["class","onClick"])):H("",!0)],2),[[$t,e.searchable]]),e.groups.length?(P(),V(r,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:$(e.ui.container)},{default:z(()=>[(P(!0),K(ve,null,ge(e.groups,h=>(P(),V(c,{key:h.key,query:e.query,group:h,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},Pt({_:2},[ge(e.$slots,(S,O)=>({name:O,fn:z(C=>[oe(e.$slots,O,Lt(Tt(C)))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?oe(e.$slots,"empty-state",{key:1},()=>[U("div",{class:$(e.ui.emptyState.wrapper)},[e.emptyState.icon?(P(),V(i,{key:0,name:e.emptyState.icon,class:$(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):H("",!0),U("p",{class:$(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},Z(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):H("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const no=$e(eo,[["render",to]]),oo=qe(be.ui.strategy,be.ui.modal,_t),ao=ee({components:{HDialog:Nt,HDialogPanel:Bt,TransitionRoot:Ft,TransitionChild:jt},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:modelValue","close"],setup(e,{emit:t}){const{ui:n,attrs:s}=Pe("modal",de(e,"ui"),oo,de(e,"class")),a=w({get(){return e.modelValue},set(l){t("update:modelValue",l)}}),o=w(()=>e.transition?{...n.value.transition}:{});function i(l){a.value=l,t("close")}return{ui:n,attrs:s,isOpen:a,transitionClass:o,close:i}}});function so(e,t,n,s,a,o){const i=J("TransitionChild"),l=J("HDialogPanel"),u=J("HDialog"),c=J("TransitionRoot");return P(),V(c,{appear:e.appear,show:e.isOpen,as:"template"},{default:z(()=>[ue(u,ae({class:e.ui.wrapper},e.attrs,{onClose:t[0]||(t[0]=r=>!e.preventClose&&e.close(r))}),{default:z(()=>[e.overlay?(P(),V(i,ae({key:0,as:"template",appear:e.appear},e.ui.overlay.transition),{default:z(()=>[U("div",{class:$([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear"])):H("",!0),U("div",{class:$(e.ui.inner)},[U("div",{class:$([e.ui.container,!e.fullscreen&&e.ui.padding])},[ue(i,ae({as:"template",appear:e.appear},e.transitionClass),{default:z(()=>[ue(l,{class:$([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?"w-screen":e.ui.width,e.fullscreen?"h-screen":e.ui.height,e.fullscreen?"rounded-none":e.ui.rounded,e.fullscreen?"m-0":e.ui.margin])},{default:z(()=>[oe(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear"])],2)],2)]),_:3},16,["class"])]),_:3},8,["appear","show"])}const io=$e(ao,[["render",so]]),dt=e=>{if(!e.children)return e._path;for(const t of(e==null?void 0:e.children)||[]){const n=dt(t);if(n)return n}},pt=(e,t)=>{for(const n of t){if(n._path===e&&!n._id)return n.children;if(n.children){const s=pt(e,n.children);if(s)return s}}},ft=(e,t)=>{for(const n of t){if(n._path===e)return n;if(n.children){const s=ft(e,n.children);if(s)return s}}},ro=(e,t,n)=>{let s;const a=(o,i)=>{for(const l of i)if(!(o!=="/"&&l._path==="/")){if(o!=null&&o.startsWith(l._path)&&l[t]&&(s=l[t]),l._path===o)return;l.children&&a(o,l.children)}};return a(e,n),s},lo=()=>({navBottomLink:dt,navDirFromPath:pt,navPageFromPath:ft,navKeyFromPath:ro});function uo(...e){return w(()=>e.every(t=>W(t)))}function co(e){return w(()=>!W(e))}const po=/^[^-]+.*-.*[^-]+$/,fo=/^[^_]+.*_.*[^_]+$/,ho=(e,t={})=>{const{macOS:n,usingInput:s}=Je();let a=[];const o=N([]),i=()=>{o.value.splice(0,o.value.length)},l=Xe(i,t.chainDelay??800),u=c=>{if(!c.key)return;const r=/^[a-z]{1}$/i.test(c.key);let d;if(o.value.push(c.key),o.value.length>=2){d=o.value.slice(-2).join("-");for(const h of a.filter(S=>S.chained))if(h.key===d){h.condition.value&&(c.preventDefault(),h.handler()),i();return}}for(const h of a.filter(S=>!S.chained))if(c.key.toLowerCase()===h.key&&c.metaKey===h.metaKey&&c.ctrlKey===h.ctrlKey&&!(r&&c.shiftKey!==h.shiftKey)){h.condition.value&&(c.preventDefault(),h.handler()),i();return}l()};a=Object.entries(e).map(([c,r])=>{var O,C;if(!r)return null;let d;c.includes("-")&&c!=="-"&&!((O=c.match(po))!=null&&O.length)&&console.trace(`[Shortcut] Invalid key: "${c}"`),c.includes("_")&&c!=="_"&&!((C=c.match(fo))!=null&&C.length)&&console.trace(`[Shortcut] Invalid key: "${c}"`);const h=c.includes("-")&&c!=="-";if(h)d={key:c.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const M=c.toLowerCase().split("_").map(m=>m);d={key:M.filter(m=>!["meta","ctrl","shift","alt"].includes(m)).join("_"),metaKey:M.includes("meta"),ctrlKey:M.includes("ctrl"),shiftKey:M.includes("shift"),altKey:M.includes("alt")}}if(d.chained=h,!n.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof r=="function"?d.handler=r:typeof r=="object"&&(d={...d,handler:r.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;const S=[];return r.usingInput?typeof r.usingInput=="string"&&S.push(w(()=>s.value===r.usingInput)):S.push(co(s)),d.condition=uo(...S,...r.whenever||[]),d}).filter(Boolean),Vt("keydown",u)},mo=ee({__name:"DocsSearch",props:{files:{},navigation:{},links:{},groups:{},fuse:{},ui:{}},setup(e,{expose:t}){const n={padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-screen sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10",closeButton:{icon:"i-heroicons-x-mark-20-solid",color:"gray",variant:"ghost",size:"xs"}},fileIcon:{name:"i-heroicons-document-text"}},s=e,a=Dt(),{navKeyFromPath:o}=lo(),i=Kt(),{usingInput:l}=Je(),{isDocsSearchModalOpen:u}=Ht(),c=Ut({mobile:640}),r=zt(),{ui:d,attrs:h}=Pe("docs.search",de(s,"ui"),n,void 0,!0),S=c.smaller("mobile"),O=N();function C(v){var g;return v.icon?v.icon:(g=v.navigation)!=null&&g.icon?v.navigation.icon:(s.navigation&&(v.icon=o(v._path,"icon",s.navigation)),v.icon||d.value.fileIcon.name)}const M=w(()=>Ye({},s.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value"]},resultLimit:12})),m=w(()=>{var v;return[((v=s.links)==null?void 0:v.length)&&{key:"links",label:"Links",commands:s.links.flatMap(g=>[g.to&&{id:a.resolve(g.to).fullPath,...g,icon:g.icon||d.value.fileIcon.name},...(g.children||[]).map(p=>({id:a.resolve(p.to).fullPath,prefix:g.label,suffix:p.description,...p,icon:p.icon||g.icon||d.value.fileIcon.name}))]).filter(Boolean)},...(s.navigation||[]).map(g=>({key:g._path,label:g.title,commands:s.files.filter(p=>{var f;return(f=p._path)==null?void 0:f.startsWith(g._path)}).flatMap(p=>{var y,I,R;const f=(y=Wt(g.children,p))==null?void 0:y.map(({title:x})=>x).join(" > ");return[{id:p._id,label:((I=p.navigation)==null?void 0:I.title)||p.title,title:((R=p.navigation)==null?void 0:R.title)||p.title,prefix:f,to:p._path,suffix:p.description,icon:C(p)},...Object.entries(L(p.body.children)).map(([x,{title:B,children:se}])=>{var Te;if(B)return{id:`${p._path}${x}`,label:B,prefix:(f?`${f} > `:"")+`${((Te=p.navigation)==null?void 0:Te.title)||p.title}`,to:`${p._path}${x}`,children:T(se),icon:C(p),child:!0}})].filter(Boolean)}),filter:(p,f)=>p?f:f==null?void 0:f.filter(y=>!y.child)})),...s.groups||[],!(r!=null&&r.forced)&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:i.ui.icons.light,disabled:r.preference==="light",click:()=>{r.preference="light"}},{id:"theme-dark",label:"Dark",icon:i.ui.icons.dark,disabled:r.preference==="dark",click:()=>{r.preference="dark"}}]}].filter(Boolean)}),A=w(()=>u.value||!l.value);function E(v){return v==null?void 0:v.map(g=>{var p;return["code","code-inline","em","a","strong"].includes(g.tag)?{type:"text",value:((p=g.children.find(f=>f.type==="text"))==null?void 0:p.value)||""}:g})}function T(v){return v.map(g=>{var p;return["callout"].includes(g.tag)&&(g.children=T(g.children)),g.tag==="p"&&(g.children=E(g.children),g.children=(p=g.children)==null?void 0:p.reduce((f,y)=>(y.type==="text"&&f.length&&f[f.length-1].type==="text"?f[f.length-1].value+=y.value:f.push(y),f),[])),["style"].includes(g.tag)?null:g})}function L(v){var y;const g={};let p="",f;for(const I of v)["h2","h3"].includes(I.tag)&&(f=(y=I.children)==null?void 0:y.map(R=>{var x,B;if(R.type==="text")return R.value;if(["code","code-inline","em","a","strong"].includes(R.tag))return(B=(x=R.children)==null?void 0:x.find(se=>se.type==="text"))==null?void 0:B.value}).filter(Boolean).join(" "),f&&(p=`#${I.props.id}`)),g[p]?g[p].children.push(I):g[p]={children:[I],title:f};return g}function b(v){u.value=!1,v.click?v.click():v.to?v.target==="_blank"||v.to.startsWith("http")?window.open(v.to,v.target||"_blank"):a.push(v.to):v.href&&window.open(v.href,"_blank")}return ho({meta_k:{usingInput:!0,whenever:[A],handler:()=>{u.value=!u.value}},escape:{usingInput:!0,whenever:[u],handler:()=>{u.value=!1}}}),t({commandPaletteRef:O}),(v,g)=>{const p=no,f=io;return P(),V(f,ae({modelValue:Y(u),"onUpdate:modelValue":g[1]||(g[1]=y=>qt(u)?u.value=y:null),overlay:!Y(S),transition:!Y(S),ui:Y(d)},Y(h)),{default:z(()=>[ue(p,{ref_key:"commandPaletteRef",ref:O,groups:Y(m),ui:Y(d).commandPalette,"close-button":Y(d).commandPalette.closeButton,fuse:Y(M),"onUpdate:modelValue":b,onClose:g[0]||(g[0]=y=>u.value=!1)},null,8,["groups","ui","close-button","fuse"])]),_:1},16,["modelValue","overlay","transition","ui"])}}});export{mo as default};
